<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>IBM Cloud Push Notifications Web SDK</h1>
<p><a href="https://www.codacy.com/app/ibm-bluemix-mobile-services/bms-clientsdk-javascript-webpush?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ibm-bluemix-mobile-services/bms-clientsdk-javascript-webpush&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/d969042f957a4e78a6e4ea88937c6305" alt="Codacy Badge"></a></p>
<p>The <a href="https://cloud.ibm.com/catalog/services/push-notifications">IBM Cloud Push Notifications service</a> provides a unified push service to send real-time notifications to mobile and web applications. The SDK enables Safari, Chrome,  Firefox browsers and Chrome Apps &amp; Extensions to receive push notifications sent from the service.</p>
<p>Ensure that you go through <a href="https://cloud.ibm.com/docs/services/mobilepush?topic=mobile-pushnotification-gettingstartedtemplate#gettingstartedtemplate">IBM Cloud Push Notifications service documentation</a> before you start.</p>
<h2>Contents</h2>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#initialize-sdk">Initialize SDK</a>
<ul>
<li><a href="#initialize-client-push-sdk">Initialize client Push SDK</a></li>
<li><a href="#initialize-web-push-sdk">Initialize web Push SDK</a></li>
</ul>
</li>
<li><a href="#register-for-notifications">Register for notifications</a>
<ul>
<li><a href="#unregistering-from-notifications">Unregistering from notifications</a></li>
</ul>
</li>
<li><a href="#push-notifications-service-tags">Push Notifications service tags</a>
<ul>
<li><a href="#retrieve-available-tags">Retrieve available tags</a></li>
<li><a href="#subscribe-to-tags">Subscribe to tags</a></li>
<li><a href="#retrieve-subscribed-tags">Retrieve subscribed tags</a></li>
<li><a href="#unsubscribing-from-tags">Unsubscribing from tags</a></li>
</ul>
</li>
<li><a href="#parameterize-push-notifications">Parameterize Push Notifications</a></li>
<li><a href="#samples-and-videos">Samples and videos</a></li>
</ul>
<h2>Prerequisites</h2>
<ul>
<li>Firefox 49.0 or later</li>
<li>Chrome 54.0 or later</li>
<li>Safari 9.1 or later</li>
</ul>
<h2>Installation</h2>
<p>Download the <a href="https://codeload.github.com/ibm-bluemix-mobile-services/bms-clientsdk-javascript-webpush/zip/master">Push Notifications Web Client SDK package</a>.</p>
<h2>Initialize SDK</h2>
<p>Complete the following steps to initialize the SDK.</p>
<h3>Initialize client Push SDK</h3>
<p>Complete the following steps:</p>
<p>Ensure that you go through <a href="https://cloud.ibm.com/docs/services/mobilepush/push_step_1.html#configure-credential-for-browsers">service configuration</a> before starting the client configuration.</p>
<p>Choose any of the following options, based on your browser:</p>
<ul>
<li>
<p>Chrome and Firefox web browsers</p>
<p>Ensure that you go through <a href="https://cloud.ibm.com/docs/services/mobilepush/push_step_1.html#configure-credential-for-browsers">service configuration</a> before starting the client configuration. To install the Javascript SDK in Chrome and Firefox, complete the following steps:</p>
<ol>
<li>
<p>Add the <code>BMSPushSDK.js</code>,<code>BMSPushServiceWorker.js</code> and <code>manifest_Website.json</code> files to your project root folder.</p>
</li>
<li>
<p>Edit the <code>manifest_Website.json</code> file.</p>
<ul>
<li>
<p>For Chrome browser:</p>
<pre class="prettyprint source lang-JSON"><code>{
	&quot;name&quot;: &quot;YOUR_WEBSITE_NAME&quot;,
	&quot;gcm_sender_id&quot;: &quot;GCM_Sender_Id&quot;
}
</code></pre>
<p>Change the <code>name</code> to your website's name and update the  <code>gcm_sender_id</code> to your Firebase Cloud Messaging (FCM) [sender ID] (https://cloud.ibm.com/docs/services/mobilepush/push_step_1.html#push_step_1_android). Note that the <code>gcm_sender_id</code> value contains only numbers.</p>
<blockquote>
<p><strong>Note</strong>: <code>gcm_sender_id</code> is not required if you are using the applicationServerKey in BMS push init method.</p>
</blockquote>
</li>
<li>
<p>For Firefox browser, add the following values in <code>manifest_Website.json</code> file.</p>
<pre class="prettyprint source lang-JSON"><code>{
&quot;name&quot;: &quot;YOUR_WEBSITE_NAME&quot;
}
</code></pre>
<p>Change <code>name</code> to your website's name.</p>
</li>
</ul>
</li>
<li>
<p>Change the <code>manifest_Website.json</code> file name to <code>manifest.json</code>.</p>
</li>
<li>
<p>Include the <code>manifest.json</code> in <code>&lt;head&gt;</code> tag of your html file .</p>
<pre class="prettyprint source lang-HTML"><code> &lt;link rel=&quot;manifest&quot; href=&quot;manifest.json&quot;>
</code></pre>
</li>
<li>
<p>Include IBM Cloud Web push SDK to the script ,</p>
<pre class="prettyprint source lang-HTML"><code>&lt;script src=&quot;BMSPushSDK.js&quot; async>&lt;/script>
</code></pre>
</li>
</ol>
</li>
<li>
<p>Safari web browsers</p>
<p>For Safari web browsers, add the <code>BMSPushSDK.js</code> in the <code>html</code> file:
<code>HTML      	&lt;script src=&quot;BMSPushSDK.js&quot; async&gt;&lt;/script&gt;     </code></p>
</li>
<li>
<p>Chrome Apps</p>
<p>For installing the Javascript SDK in Chrome Apps, complete the following steps:</p>
<ol>
<li>
<p>Add the <code>BMSPushSDK.js</code> and  <code>manifest_Chrome_App.json</code> .</p>
</li>
<li>
<p>Configure the manifest file:</p>
<ol>
<li>For <code>Chrome App</code> in the <code>manifest_Chrome_App.json</code> file provide <code>name</code>, <code>description</code> , and <code>icons</code>.</li>
<li>Add the <code>BMSPushSDK.js</code> in the <code>app.background.scripts</code>.</li>
<li>Change the <code>manifest_Chrome_App.json</code> to <code>manifest.json</code>.</li>
</ol>
</li>
<li>
<p>In your <code>Javascript</code> file (background.js), add the following to receive push notifications:</p>
<pre class="prettyprint source lang-JS"><code>chrome.gcm.onMessage.addListener(BMSPushBackground.onMessageReceived)chrome.notifications.onClicked.addListener(BMSPushBackground.notification_onClicked);
 chrome.notifications.onButtonClicked.addListener(BMSPushBackground.notifiation_buttonClicked);
</code></pre>
</li>
</ol>
</li>
<li>
<p>Chrome Extensions</p>
<p>Add the <code>BMSPushSDK.js</code> and <code>manifest_Chrome_Ext.json</code> .</p>
<ol>
<li>Configure the manifest file:
<ul>
<li>For <code>Chrome Extensions</code> in the <code>manifest_Chrome_Ext.json</code> file, provide <code>name</code>, <code>description</code> , and <code>icons</code>.</li>
<li>Add the <code>BMSPushSDK.js</code> in the <code>background.scripts</code>.</li>
<li>Change the <code>manifest_Chrome_Ext.json</code> to <code>manifest.json</code>.</li>
</ul>
</li>
<li>In your <code>Javascript</code> file, add the following to receive notifications:</li>
</ol>
<pre class="prettyprint source lang-JS"><code>chrome.gcm.onMessage.addListener(BMSPushBackground.onMessageReceived)
chrome.notifications.onClicked.addListener(BMSPushBackground.notification_onClicked);
chrome.notifications.onButtonClicked.addListener(BMSPushBackground.notifiation_buttonClicked);
</code></pre>
</li>
</ul>
<h3>Initialize web Push SDK</h3>
<p>Initialise the web push SDK with IBM Cloud Push Notifications service <code>app GUID</code>,<code>clientSecret</code>,<code>websitePushIDSafari</code>,<code>deviceId</code> and <code>app Region</code>.</p>
<pre class="prettyprint source lang-JS"><code>var bmsPush = new BMSPush()
function callback(response) {
	alert(response.response)
}
var initParams = {
    &quot;appGUID&quot;:&quot;push app GUID&quot;,
    &quot;appRegion&quot;:&quot;Region where service hosted&quot;,
    &quot;clientSecret&quot;:&quot;push app client secret&quot;, // optional parameter. This value is needed for userId based notifications registration.
	&quot;websitePushIDSafari&quot;: &quot;website Push ID for safari&quot; // Optional parameter for Safari web push,
    &quot;deviceId&quot;:&quot;Optional deviceId for device registration&quot;
}
bmsPush.initialize(params, callback)
</code></pre>
<p>The <code>App Region</code> specifies the location where the Push service is hosted. You can use one of the following three values:</p>
<ul>
<li>For US Dallas - <code>.ng.bluemix.net</code></li>
<li>For UK - <code>.eu-gb.bluemix.net</code></li>
<li>For Sydney - <code>.au-syd.bluemix.net</code></li>
<li>For Germany -  <code>.eu-de.bluemix.net</code></li>
<li>For US East - <code>.us-east.bluemix.net</code></li>
<li>For Tokyo - <code>.jp-tok.bluemix.net</code></li>
</ul>
<blockquote>
<p><strong>Note</strong>:For debugging, use <code>bmsPush.isDebugEnable(true)</code>.</p>
</blockquote>
<h2>Register for notifications</h2>
<p>Use the <code>register()</code> or <code>registerWithUserId()</code> API to register the device with IBM Cloud Push Notifications service. Choose either of the following options:</p>
<ul>
<li>
<p>Register without UserId</p>
<p>To register without userId use the following pattern</p>
<pre class="prettyprint source lang-JS"><code>var bmsPush = new BMSPush()
function callback(response) {
	alert(response.response)
}
var initParams = {
	&quot;appGUID&quot;:&quot;push app GUID&quot;,
	&quot;appRegion&quot;:&quot;Region where service hosted&quot;,
	&quot;clientSecret&quot;:&quot;push app client secret&quot;
}
bmsPush.initialize(initParams, callback)
bmsPush.register(function(response) {
	alert(response.response)
})
</code></pre>
</li>
<li>
<p>Register with UserId</p>
<p>For <code>UserId</code> based registration, use the following code snippet,</p>
<pre class="prettyprint source lang-JS"><code>var bmsPush = new BMSPush()
function callback(response) {
	alert(response.response)
}	
var initParams = {
	&quot;appGUID&quot;:&quot;push app GUID&quot;,
	&quot;appRegion&quot;:&quot;Region where service hosted&quot;,
	&quot;clientSecret&quot;:&quot;push app client secret&quot;
}
bmsPush.initialize(initParams, callback)
  bmsPush.registerWithUserId(&quot;your UserId&quot;,function(response) {
	alert(response.response)
})
</code></pre>
</li>
</ul>
<p><code>WithUserId</code> is the user identifier value with which you want to register devices in the push service instance.</p>
<blockquote>
<p><strong>Note</strong>: If <code>userId</code> is provided, the client secret value must be provided.</p>
</blockquote>
<h3>Unregistering from notifications</h3>
<ul>
<li>
<p>To unregister from receiving notifications, add the following <code>unRegisterDevice()</code> method:</p>
<pre class="prettyprint source lang-JS"><code>bmsPush.unRegisterDevice(function(response) {
	alert(response.response)
}
</code></pre>
</li>
<li>
<p>To unregister the device from <code>UserId</code> based registration, you have to call the registration method. See the <code>Register without userId option</code> in <a href="#registering-web-application">Register for notifications</a>.</p>
</li>
</ul>
<h2>Push Notifications service tags</h2>
<h3>Retrieve available tags</h3>
<p>To retrieve all the available tags, use the <code>retrieveAvailableTags()</code> method.</p>
<pre class="prettyprint source lang-JS"><code> bmsPush.retrieveAvailableTags(function(response) { //Retrieve available tags
   var jsonResponse = JSON.parse(response.response)
   var tagsArray = []
   for (i in jsonResponse.tags){
     tagsArray.push(jsonResponse.tags[i].name)
   }
   alert(tagsArray)
 })
</code></pre>
<h3>Subscribe to tags</h3>
<p>The <code>subscribe()</code> API will subscribe the web application for a list of given tags. After the device is subscribed to a particular tag, the device can receive push notifications that are targeted to an audience who have subscribed to that tag.</p>
<p>Use the following code snippet in your application to subscribe a list of tags.</p>
<pre class="prettyprint source lang-JS"><code>bmsPush.subscribe(tagsArray,function(response) {
  alert(response.response)
})
</code></pre>
<h3>Retrieve subscribed tags</h3>
<p>The <code>retrieveSubscriptions</code> API will return the list of tags to which a website is subscribed.</p>
<p>Use the following code snippet in your application to get a subscription list.</p>
<pre class="prettyprint source lang-JS"><code>bmsPush.retrieveSubscriptions(function(response){
   alert(response.response);
})
</code></pre>
<h3>Unsubscribing from tags</h3>
<p>To unsubscribe to a tag or tags, use the <code>unSubscribe()</code> method. Pass the array of tag names as parameter.</p>
<pre class="prettyprint source lang-JS"><code>bmsPush.unSubscribe(tagsArray,function(response) {
	alert(response.response)
}
</code></pre>
<h2>Parameterize Push Notifications</h2>
<p>Add the variables in the Push initialize params values.</p>
<pre class="prettyprint source lang-JS"><code>var templateValues = {
  &quot;userName&quot;:&quot;testname&quot;,
  &quot;accountNumber&quot;:&quot;3564758697057869&quot;
}

var initParams = {
  &quot;appGUID&quot;:&quot;push app GUID&quot;,
  &quot;appRegion&quot;:&quot;Region where service hosted&quot;,
  &quot;clientSecret&quot;:&quot;push app client secret&quot;,
  &quot;pushVaribales&quot;:templateValues
}

bmsPush.initialize(initParams, callback)
</code></pre>
<p>While registering the device IBM Cloud Push Notifications Web SDK will pass these variables to IBM Cloud Push Notifications service.</p>
<p>While sending push notification add the varibale key in <code>{{}}</code></p>
<pre class="prettyprint source lang-JSON"><code>
  {
      &quot;message&quot;: {
          &quot;alert&quot;: &quot;hello {{username}} , balance on your account {{accountNumber}} is $1200&quot;
      }
  }

</code></pre>
<h2>Samples and videos</h2>
<ul>
<li>
<p>For samples, visit - <a href="https://github.com/ibm-bluemix-mobile-services/bms-samples-swift-hellopush">Github Sample</a></p>
</li>
<li>
<p>For video tutorials visit - <a href="https://www.youtube.com/playlist?list=PLTroxxTPN9dIZYn9IU-IOcQePO-u5r0r4">IBM Cloud Push Notifications</a></p>
</li>
</ul>
<h3>Learning more</h3>
<ul>
<li>
<p>Visit the <strong><a href="https://developer.ibm.com/depmodels/cloud/">IBM Cloud Developers Community</a></strong>.</p>
</li>
<li>
<p><a href="https://cloud.ibm.com/docs/mobile">Getting started with IBM MobileFirst Platform for iOS</a></p>
</li>
</ul>
<h3>Connect with IBM Cloud</h3>
<p><a href="https://twitter.com/IBMCloud">Twitter</a> |
<a href="https://www.youtube.com/watch?v=AVPoBWScRQc">YouTube</a> |
<a href="https://developer.ibm.com/depmodels/cloud/">Blog</a> |
<a href="https://www.facebook.com/ibmcloud">Facebook</a> |</p>
<p>=======================
Copyright 2020-21 IBM Corp.</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<p>http://www.apache.org/licenses/LICENSE-2.0</p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-BMSPush.html">BMSPush</a></li><li><a href="module-BMSPushServiceWorker.html">BMSPushServiceWorker</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Tue May 05 2020 18:22:33 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>