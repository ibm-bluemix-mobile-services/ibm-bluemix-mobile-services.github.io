<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BMSPush  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="BMSPush  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">BMSPush Docs</a> (66% documented)</p>
        <p class="header-right"><a href="https://github.com/ibm-bluemix-mobile-services/bms-clientsdk-swift-push"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">BMSPush Reference</a>
        <img id="carat" src="img/carat.png" />
        BMSPush  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Client.html">Client</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BMSPushClient.html">BMSPushClient</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Options.html">Options</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BMSPushClientOptions.html">BMSPushClientOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BMSPushNotificationAction.html">BMSPushNotificationAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BMSPushNotificationActionCategory.html">BMSPushNotificationActionCategory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="iOS 10 Rich Push.html">iOS 10 Rich Push</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BMSPushRichPushNotificationOptions.html">BMSPushRichPushNotificationOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other Classes.html#/c:@M@BMSPush@objc(cs)BMSPushUtils">BMSPushUtils</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Response.html">Response</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='ibm-cloud-mobile-services-client-sdk-swift-push' class='heading'>IBM Cloud Mobile Services - Client SDK Swift Push</h1>

<p><a href="https://travis-ci.org/ibm-bluemix-mobile-services/bms-clientsdk-swift-push"><img src="https://travis-ci.org/ibm-bluemix-mobile-services/bms-clientsdk-swift-push.svg?branch=master" alt="Build Status"></a>
<a href="https://www.codacy.com/app/AnanthaKrish/bms-clientsdk-swift-push?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ibm-bluemix-mobile-services/bms-clientsdk-swift-push&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/7a8222746ad84415812c0bfdf9ada631" alt="Codacy Badge"></a>
<a href="https://coveralls.io/github/ibm-bluemix-mobile-services/bms-clientsdk-swift-push?branch=development"><img src="https://coveralls.io/repos/github/ibm-bluemix-mobile-services/bms-clientsdk-swift-push/badge.svg?branch=development" alt="Coverage Status"></a>
<a href="https://github.com/ibm-bluemix-mobile-services/bms-clientsdk-swift-push.git"><img src="https://img.shields.io/cocoapods/v/BMSPush.svg" alt="CocoaPods Compatible"></a>
<a href="https://bluemix.net"><img src="https://img.shields.io/badge/bluemix-powered-blue.svg" alt=""></a>
<a href="https://cocoapods.org/pods/BMSPush"><img src="https://img.shields.io/cocoapods/dt/BMSPush.svg" alt="CocoaPods"></a></p>

<p>This is the Push component of the Swift SDK for <a href="https://console.ng.net/docs/mobile/index.html">IBM Cloud Mobile Services</a>.</p>
<h2 id='contents' class='heading'>Contents</h2>

<p>This package contains the Push components of the Swift SDK.</p>

<ul>
<li>Push Registration and Un-register</li>
<li>Subscribing and Unsubscribing for Tags</li>
</ul>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 8.0+</li>
<li>Xcode 7.3, 8.0</li>
<li>Swift 2.3 - 4.0</li>
<li>CocoaPods or Carthage</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<p>The IBM Cloud Mobile Services Swift SDKs are available via <a href="http://cocoapods.org/">CocoaPods</a> and <a href="https://github.com/Carthage/Carthage">Carthage</a>.</p>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>To install BMSPush using CocoaPods, add it to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">use_frameworks!</span>

<span class="n">target</span> <span class="s1">'MyApp'</span> <span class="k">do</span>
    <span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'8.0'</span>
    <span class="n">pod</span> <span class="s1">'BMSCore'</span><span class="p">,</span> <span class="s1">'~&gt; 2.0'</span>
    <span class="n">pod</span> <span class="s1">'BMSPush'</span><span class="p">,</span> <span class="s1">'~&gt; 3.0'</span>
<span class="k">end</span>
</code></pre>

<p>From the Terminal, go to your project folder and install the dependencies with the following command:</p>
<pre class="highlight plaintext"><code>pod install
</code></pre>
<h4 id='swift-2-3' class='heading'>Swift 2.3</h4>

<p>Before running the <code>pod install</code> command, make sure to use Cocoapods version <a href="https://github.com/CocoaPods/CocoaPods/releases/tag/1.1.0.beta.1">1.1.0.beta.1</a>.</p>
<h4 id='swift-3-swift-4' class='heading'>Swift 3/ Swift 4</h4>

<p>Before running the <code>pod install</code> command, make sure to use CocoaPods version <a href="https://github.com/CocoaPods/CocoaPods/releases/tag/1.1.0.beta.1">1.1.0.beta.1</a>.</p>

<p>For apps built with Swift 3.0/Swift 4.0, you may receive a prompt saying <q>Convert to Current Swift Syntax?</q> when opening your project in XCode 8 (following the installation of BMSCore) do not convert BMSPush, BMSCore or BMSAnalyticsAPI</p>

<p>This will installs your dependencies and creates a new Xcode workspace.
<strong><em>Note:</em></strong> Ensure that you always open the new Xcode workspace, instead of the original Xcode project file:</p>
<pre class="highlight plaintext"><code>MyApp.xcworkspace
</code></pre>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>To install BMSPush using Carthage, add it to your Cartfile:</p>
<pre class="highlight plaintext"><code>github "ibm-bluemix-mobile-services/bms-clientsdk-swift-push"
</code></pre>

<p>Then run the <code>carthage update</code> command. Once the build is finished, drag <code>BMSPush.framework</code>,<code>BMSCore.framework</code> and <code>BMSAnalyticsAPI.framework</code> into your Xcode project.</p>

<p>To complete the integration, follow the instructions <a href="https://github.com/Carthage/Carthage#getting-started">here</a>.</p>
<h4 id='xcode-8' class='heading'>Xcode 8</h4>

<p>For apps built with Swift 2.3, use the command <code>carthage update --toolchain com.apple.dt.toolchain.Swift_2_3.</code> Otherwise, use <code>carthage update</code></p>
<h2 id='enabling-ios-applications-to-receive-push-notifications' class='heading'>Enabling iOS applications to receive push notifications</h2>
<h3 id='reference-the-sdk-in-your-code' class='heading'>Reference the SDK in your code.</h3>
<pre class="highlight plaintext"><code>import BMSPush
import BMSCore
</code></pre>
<h3 id='initializing-the-core-sdk' class='heading'>Initializing the Core SDK</h3>
<pre class="highlight plaintext"><code>let myBMSClient = BMSClient.sharedInstance

//Swift 3/Swift 4.0

myBMSClient.initialize(bluemixRegion: "Location where your app Hosted")

//Swift 2.3 or Older

myBMSClient.initialize(bluemixRegion: "Location where your app Hosted")

</code></pre>
<h5 id='bluemixregion' class='heading'>bluemixRegion</h5>

<ul>
<li>Specifies the location where the app hosted. You can either use one of three values - <code>BMSClient.Region.usSouth</code>, <code>BMSClient.Region.unitedKingdom</code>, <code>BMSClient.Region.germany</code> and <code>BMSClient.Region.sydney</code> OR specify the region manually .</li>
</ul>

<blockquote>
<p><strong>Note</strong>:  If you are using dedicated service please use <code>overrideServerHost</code> and add <code>bluemixRegion</code> any value.</p>
</blockquote>
<h3 id='initializing-the-push-sdk' class='heading'>Initializing the Push SDK</h3>

<p>initialize the <code><a href="Classes/BMSPushClient.html">BMSPushClient</a></code>  using the following code.</p>
<pre class="highlight plaintext"><code>let push =  BMSPushClient.sharedInstance

//Swift 3/ Swift 4.0

push.initializeWithAppGUID(appGUID: "your push appGUID", clientSecret:"your push client secret")

//Swift Older

push.initializeWithAppGUID(appGUID:"your push appGUID", clientSecret:"your push client secret")

</code></pre>
<h5 id='appguid' class='heading'>appGUID</h5>

<ul>
<li>The Push app GUID value.</li>
</ul>
<h5 id='clientsecret' class='heading'>clientSecret</h5>

<ul>
<li>The Push client secret value.</li>
</ul>

<blockquote>
<p><strong>Note</strong>: If you are using Xcode8 beta, add <code>yourApp.entitlements</code>. To do this, go to Targets -&gt; Capabilities and enable Push Notifications capability.</p>
</blockquote>
<h3 id='bmspushobserver-for-initialize-callback' class='heading'>BMSPushObserver for initialize callback</h3>

<p>To get the <code>initializeWithAppGUID(..)</code> callback , use the following;</p>

<ol>
<li><p>Add the <code>BMSPushObserver</code> <code>protocol</code> in your AppDelegate</p>
<pre class="highlight plaintext"><code> class AppDelegate: UIResponder, UIApplicationDelegate, BMSPushObserver
</code></pre></li>
<li><p>Set the delegate for  <code>BMSPushObserver</code></p>
<pre class="highlight plaintext"><code>let push =  BMSPushClient.sharedInstance
push.delegate = self
</code></pre></li>
<li><p>Implement the <code>BMSPushObserver</code> function</p></li>
</ol>
<pre class="highlight plaintext"><code>   func onChangePermission(status: Bool) {
     print("Push Notification is enabled:  \(status)" as NSString)
    }
</code></pre>
<h3 id='registering-ios-applications-and-devices-with-userid' class='heading'>Registering iOS applications and devices with userId</h3>

<p>For <code>userId</code> based notification, the register method will accept one more parameter - <code>userId</code></p>
<pre class="highlight plaintext"><code>//Swift3/Swift 4.0

func application (_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data){

   let push =  BMSPushClient.sharedInstance
   push.registerWithDeviceToken(deviceToken: deviceToken, WithUserId: "your userId") { (response, statusCode, error) -&gt; Void in
    if error.isEmpty {
      print( "Response during device registration : \(response)")
      print( "status code during device registration : \(statusCode)")
    } else{
      print( "Error during device registration \(error) ")
      Print( "Error during device registration \n  - status code: \(statusCode) \n Error :\(error) \n")
    }  
}

//Swift2.3 and Older

func application (application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: NSData){

    let push =  BMSPushClient.sharedInstance
    push.registerWithDeviceToken(deviceToken, WithUserId: "your userId") { (response, statusCode, error) -&gt; Void in
        if error.isEmpty {
            print( "Response during device registration : \(response)")
            print( "status code during device registration : \(statusCode)")
        }else{
            print( "Error during device registration \(error) ")
            Print( "Error during device registration \n  - status code: \(statusCode) \n Error :\(error) \n")
        }
    }
}
</code></pre>
<h5 id='withuserid' class='heading'>WithUserId</h5>

<ul>
<li>The User Id value you want to register in the push service</li>
</ul>

<blockquote>
<p><strong>Note</strong>: If userId is provided the client secret value must be provided.</p>
</blockquote>
<h3 id='retrieve-available-tags-and-subscribe-for-tags-based-notifications' class='heading'>Retrieve Available Tags and subscribe for Tags based Notifications</h3>
<h5 id='retrieve-available-tags' class='heading'>Retrieve Available tags</h5>

<p>The <code>retrieveAvailableTagsWithCompletionHandler</code> API returns the list of available tags to which the device
can subscribe. After the device is subscribed to a particular tag, the device can receive any push notifications
that are sent for that tag.Call the push service to get subscriptions for a tag.</p>

<p>Copy the following code snippets into your Swift mobile application to get a list of available tags to which the
device can subscribe.</p>
<pre class="highlight plaintext"><code>
//Swift3/Swift 4.0

push.retrieveAvailableTagsWithCompletionHandler(completionHandler: { (response, statusCode, error) -&gt; Void in

  if error.isEmpty {
    print( "Response during retrieve tags : \(response)")
    print( "status code during retrieve tags : \(statusCode)")
  }else{
    print( "Error during retrieve tags \(error) ")
    Print( "Error during retrieve tags \n  - status code: \(statusCode) \n Error :\(error) \n")
  }
}

//Swift2.3 and Older

push.retrieveAvailableTagsWithCompletionHandler({ (response, statusCode, error) -&gt; Void in

    if error.isEmpty {
        print( "Response during retrieve tags : \(response)")
        print( "status code during retrieve tags : \(statusCode)")
    }else{
        print( "Error during retrieve tags \(error) ")
        Print( "Error during retrieve tags \n  - status code: \(statusCode) \n Error :\(error) \n")
    }
}
</code></pre>
<h5 id='subscribe-to-available-tags' class='heading'>Subscribe to Available tags</h5>
<pre class="highlight plaintext"><code>
//Swift3/Swift 4.0

 push.subscribeToTags(tagsArray: response!, completionHandler: { (response, statusCode, error) -&gt; Void in

   if error.isEmpty {
       print( "Response during Subscribing to tags : \(response?.description)")     
       print( "status code during Subscribing tags : \(statusCode)")
     }else{
       print( "Error during subscribing tags \(error) ")
       Print( "Error during subscribing tags \n  - status code: \(statusCode) \n Error :\(error) \n")
     }
 }

//Swift2.3 and Older

push.subscribeToTags(response, completionHandler: { (response, statusCode, error) -&gt; Void in

    if error.isEmpty {
        print( "Response during Subscribing to tags : \(response?.description)")
        print( "status code during Subscribing tags : \(statusCode)")
    }else {
        print( "Error during subscribing tags \(error) ")
        Print( "Error during subscribing tags \n  - status code: \(statusCode) \n Error :\(error) \n")
    }
}
</code></pre>
<h5 id='retrieve-subscribed-tags' class='heading'>Retrieve Subscribed tags</h5>
<pre class="highlight plaintext"><code>
//Swift3/Swift 4.0
 push.retrieveSubscriptionsWithCompletionHandler(completionHandler: { (response, statusCode, error) -&gt; Void in

   if error.isEmpty {                                     
     print( "Response during retrieving subscribed tags : \(response?.description)")
     print( "status code during retrieving subscribed tags : \(statusCode)")
   }else{
     print( "Error during retrieving subscribed tags \(error) ")
     Print( "Error during retrieving subscribed tags \n  - status code: \(statusCode) \n Error :\(error) \n")
   }
 }

//Swift2.3 and Older
push.retrieveSubscriptionsWithCompletionHandler { (response, statusCode, error) -&gt; Void in

    if error.isEmpty {
        print( "Response during retrieving subscribed tags : \(response?.description)")
        print( "status code during retrieving subscribed tags : \(statusCode)")
    }else {
        print( "Error during retrieving subscribed tags \(error) ")
        Print( "Error during retrieving subscribed tags \n  - status code: \(statusCode) \n Error :\(error) \n")
    }
}
</code></pre>
<h3 id='unsubscribing-from-tags-based-notifications' class='heading'>Unsubscribing from tags based notifications</h3>

<p>Use the following code snippets to allow your devices to get unsubscribe
from a tag.</p>
<pre class="highlight plaintext"><code>
//Swift3/Swift 4.0
push.unsubscribeFromTags(tagsArray: response!, completionHandler: { (response, statusCode, error) -&gt; Void in

  if error.isEmpty {
    print( "Response during unsubscribed tags : \(response?.description)")
    print( "status code during unsubscribed tags : \(statusCode)")
  }else{
    print( "Error during  unsubscribed tags \(error) ")
  }
}

//Swift2.3 and Older

push.unsubscribeFromTags(response, completionHandler: { (response, statusCode, error) -&gt; Void in

    if error.isEmpty {

        print( "Response during unsubscribed tags : \(response?.description)")

        print( "status code during unsubscribed tags : \(statusCode)")
    }
    else {
        print( "Error during  unsubscribed tags \(error) ")

        print( "Error during unsubscribed tags \n  - status code: \(statusCode) \n Error :\(error) \n")
    }
}
</code></pre>
<h3 id='unregistering-the-device-from-ibm-cloud-push-notification' class='heading'>Unregistering the Device from IBM Cloud Push Notification</h3>

<p>Use the following code snippets to Unregister the device from IBM Cloud Push Notification</p>
<pre class="highlight plaintext"><code>
//Swift3/Swift 4.0

push.unregisterDevice(completionHandler: { (response, statusCode, error) -&gt; Void in

  if error.isEmpty {                 
     print( "Response during unregistering device : \(response)")
     print( "status code during unregistering device : \(statusCode)")
   }else{
     print( "Error during unregistering device \(error) ")
   }
}

//Swift2.3 and Older

push.unregisterDevice({ (response, statusCode, error) -&gt; Void in

    if error.isEmpty {
        print( "Response during unregistering device : \(response)")
        print( "status code during unregistering device : \(statusCode)")
    }else{
        print( "Error during unregistering device \(error) ")
        print( "Error during unregistering device \n  - status code: \(statusCode) \n Error :\(error) \n")
    }
}
</code></pre>
<h3 id='enabling-interactive-push-notifications' class='heading'>Enabling interactive push notifications</h3>

<p>To enable interactive push notifications, the notification action parameters must be passed in as part of the notification object.  The following is a sample code to enable interactive notifications.</p>
<pre class="highlight plaintext"><code>let actionOne = BMSPushNotificationAction(identifierName: "FIRST", buttonTitle: "Accept", isAuthenticationRequired: false, defineActivationMode: UIUserNotificationActivationMode.background)

let actionTwo = BMSPushNotificationAction(identifierName: "SECOND", buttonTitle: "Reject", isAuthenticationRequired: false, defineActivationMode: UIUserNotificationActivationMode.background)

let category = BMSPushNotificationActionCategory(identifierName: "category", buttonActions: [actionOne, actionTwo])

let notificationOptions = BMSPushClientOptions()
notifOptions.setInteractiveNotificationCategories(categoryName: [category])

let push = BMSPushClient.sharedInstance.initializeWithAppGUID(appGUID: "APP-GUID-HERE", clientSecret:"CLIENT-SECRET-HERE", options: notificationOptions)

</code></pre>
<h3 id='enabling-rich-push-notification-support-in-ios-10-audio-video-gif-and-images' class='heading'>Enabling Rich Push notification support in iOS 10 (Audio, Video, GIF and Images)</h3>

<p>To receive rich push notifications with iOS10, implement <code>UNNotificationServiceExtension</code>.  The extension will intercept the rich push notification and it needs to be handled here.  While sending the notification from the server, all the four fields, alert, title, subtitle, attachmentURL must be specified.</p>

<p>In the didReceive() method of your service extension, add the following code to retrieve the rich notification content.</p>
<pre class="highlight plaintext"><code>override func didReceive(_ request: UNNotificationRequest, withContentHandler contentHandler: @escaping (UNNotificationContent) -&gt; Void) {
       self.contentHandler = contentHandler
        bestAttemptContent = (request.content.mutableCopy() as? UNMutableNotificationContent)

        BMSPushRichPushNotificationOptions.didReceive(request, withContentHandler: contentHandler)
        }
</code></pre>
<h2 id='enable-monitoring' class='heading'>Enable Monitoring.</h2>

<p>To see the push notification monitoring status for iOS you have add the following code snippets. </p>

<p><strong>Swift 3/Swift 4.0</strong></p>
<pre class="highlight plaintext"><code>// Send notification status when app is opened by clicking the notifications
func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any]) {

     let push =  BMSPushClient.sharedInstance
     let respJson = (userInfo as NSDictionary).value(forKey: "payload") as! String
     let data = respJson.data(using: String.Encoding.utf8)

     let jsonResponse:NSDictionary = try! JSONSerialization.jsonObject(with: data! , options: JSONSerialization.ReadingOptions.allowFragments) as! NSDictionary

     let messageId:String = jsonResponse.value(forKey: "nid") as! String
     push.sendMessageDeliveryStatus(messageId: messageId) { (res, ss, ee) in
         print("Send message status to the Push server")
     }
}


// Send notification status when the app is in background mode.
func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -&gt; Void) {

   let payLoad = ((((userInfo as NSDictionary).value(forKey: "aps") as! NSDictionary).value(forKey: "alert") as! NSDictionary).value(forKey: "body") as! NSString)

   self.showAlert(title: "Recieved Push notifications", message: payLoad)

   let push =  BMSPushClient.sharedInstance

   let respJson = (userInfo as NSDictionary).value(forKey: "payload") as! String
   let data = respJson.data(using: String.Encoding.utf8)

   let jsonResponse:NSDictionary = try! JSONSerialization.jsonObject(with: data! , options: JSONSerialization.ReadingOptions.allowFragments) as! NSDictionary

   let messageId:String = jsonResponse.value(forKey: "nid") as! String
   push.sendMessageDeliveryStatus(messageId: messageId) { (res, ss, ee) in
       completionHandler(UIBackgroundFetchResult.newData)
   }
}
</code></pre>

<p><strong>Swift 2.3</strong></p>
<pre class="highlight plaintext"><code>func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject]) {

  let respJson = (userInfo as NSDictionary).valueForKey("payload") as! String
  let data = respJson.dataUsingEncoding(NSUTF8StringEncoding)

  do {
      let responseObject:NSDictionary = try NSJSONSerialization.JSONObjectWithData(data!, options: []) as! NSDictionary
      let nid = responseObject.valueForKey("nid") as! String
      print(nid)

      let push =  BMSPushClient.sharedInstance

      push.sendMessageDeliveryStatus(nid, completionHandler: { (response, statusCode, error) in

          print("Send message status to the Push server")
      })

  } catch let error as NSError {
      print("error: \(error.localizedDescription)")
  }
}

func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject], fetchCompletionHandler completionHandler: (UIBackgroundFetchResult) -&gt; Void) {

  let payLoad = ((((userInfo as NSDictionary).valueForKey("aps") as! NSDictionary).valueForKey("alert") as! NSDictionary).valueForKey("body") as! NSString)

  self.showAlert("Recieved Push notifications", message: payLoad)


  let respJson = (userInfo as NSDictionary).valueForKey("payload") as! String
  let data = respJson.dataUsingEncoding(NSUTF8StringEncoding)

  do {
      let responseObject:NSDictionary = try NSJSONSerialization.JSONObjectWithData(data!, options: []) as! NSDictionary
      let nid = responseObject.valueForKey("nid") as! String
      print(nid)

      let push =  BMSPushClient.sharedInstance

      push.sendMessageDeliveryStatus(nid, completionHandler: { (response, statusCode, error) in
          completionHandler(UIBackgroundFetchResult.NewData)
      })

  } catch let error as NSError {
      print("error: \(error.localizedDescription)")
  }
}
</code></pre>

<blockquote>
<p><strong>Note</strong>: To get the message status when the app is in background you have to send either <strong>MIXED</strong> or <strong>SILENT</strong> push notifications. If the app is force quite you will not get any message delivery status.</p>
</blockquote>
<h3 id='open-url-by-clicking-push-notifications' class='heading'>Open Url by clicking push notifications.</h3>

<p>To open a url by clicking the push notification you can send a <code>url</code> firld inside the payload.</p>
<pre class="highlight plaintext"><code>{
  "message": {
    "alert": "Notification alert message",
    "url":"https://console.ng.bliuemix.net"
  }
}
</code></pre>

<p>In your applications, go to <code>AppDelegate</code> file and inside <code>didFinishLaunchingWithOptions</code> check the value for <code>url</code></p>
<pre class="highlight plaintext"><code>let remoteNotif = launchOptions?[UIApplicationLaunchOptionsKey.remoteNotification] as? NSDictionary

if remoteNotif != nil {
    let urlField = (remoteNotif?.value(forKey: "url") as! String)
    application.open(URL(string: urlField)!, options: [:], completionHandler: nil)
}
</code></pre>
<h3 id='adding-custom-deviceid-for-registration' class='heading'>Adding custom DeviceId for registration</h3>

<p>To send <code>DeviceId</code> please use <code><a href="Classes/BMSPushClientOptions.html">BMSPushClientOptions</a></code> class method,</p>
<pre class="highlight plaintext"><code>let notifOptions = BMSPushClientOptions()
notifOptions.setDeviceId(deviceId: "YOUR_DEVICE_ID")
</code></pre>

<blockquote>
<p><strong>Note</strong>: Remember to keep custom DeviceId <strong>unique</strong> for each device.</p>
</blockquote>
<h3 id='parameterize-push-notifications' class='heading'>Parameterize Push Notifications</h3>

<p>To enable the Parameterize IBM Cloud Push Notifications, do the following ,</p>

<ol>
<li>Add the variables key vaue pair in the <code><a href="Classes/BMSPushClientOptions.html">BMSPushClientOptions</a></code></li>
</ol>
<pre class="highlight swift"><code>
    <span class="k">let</span> <span class="nv">variables</span> <span class="o">=</span> <span class="p">[</span>
          <span class="s">"username"</span><span class="p">:</span><span class="s">"testname"</span><span class="p">,</span>
          <span class="s">"accountNumber"</span><span class="p">:</span><span class="s">"3564758697057869"</span>
          <span class="p">]</span>
    <span class="k">let</span> <span class="nv">notifOptions</span> <span class="o">=</span> <span class="kt">BMSPushClientOptions</span><span class="p">()</span>
    <span class="n">notifOptions</span><span class="o">.</span><span class="nf">setPushVariables</span><span class="p">(</span><span class="nv">pushVaribales</span><span class="p">:</span> <span class="n">variables</span><span class="p">)</span>
</code></pre>

<ol>
<li><p>Pass the <code><a href="Classes/BMSPushClientOptions.html">BMSPushClientOptions</a></code> in the <code>initializeWithAppGUID()</code> method. While registering the device IBM Cloud Push Notifications iOS SDK will pass these variables to IBM Cloud Push Notifications service. </p></li>
<li><p>In the <code>application:didReceiveRemoteNotification:fetchCompletionHandler ()</code> add the following to handle the template based push notifications,</p>
<pre class="highlight plaintext"><code>    let push =  BMSPushClient.sharedInstance
    push.didReciveBMSPushNotification(userInfo: userInfo) { (res, error) in
        completionHandler(UIBackgroundFetchResult.newData)
    }
</code></pre></li>
<li><p>While sending push notification add the varibale key in <code>{{}}</code></p></li>
</ol>
<pre class="highlight plaintext"><code>
    {
        "message": {
            "alert": "hello {{username}} , balance on your account {{accountNumber}} is $1200"
        }
    }

</code></pre>

<blockquote>
<p><strong>Note</strong>: If the app is force killed , the Template based notifications may not appear in the device.</p>
</blockquote>
<h3 id='samples-amp-videos' class='heading'>Samples &amp; videos</h3>

<ul>
<li><p>Please visit for samples - <a href="https://github.com/ibm-bluemix-mobile-services/bms-samples-swift-hellopush">Github Sample</a></p></li>
<li><p>Video Tutorials Available here - <a href="https://www.youtube.com/channel/UCRr2Wou-z91fD6QOYtZiHGA">IBM Cloud Push Notifications</a></p></li>
</ul>
<h3 id='learning-more' class='heading'>Learning More</h3>

<ul>
<li><p>Visit the <strong><a href="https://developer.ibm.com/bluemix/">IBM Cloud Developers Community</a></strong>.</p></li>
<li><p><a href="https://www.ng.bluemix.net/docs/mobile/index.html">Getting started with IBM MobileFirst Platform for iOS</a></p></li>
</ul>
<h3 id='connect-with-ibm-cloud' class='heading'>Connect with IBM Cloud</h3>

<p><a href="https://twitter.com/ibmbluemix">Twitter</a> |
<a href="https://www.youtube.com/playlist?list=PLzpeuWUENMK2d3L5qCITo2GQEt-7r0oqm">YouTube</a> |
<a href="https://developer.ibm.com/bluemix/blog/">Blog</a> |
<a href="https://www.facebook.com/ibmbluemix">Facebook</a> |
<a href="http://www.meetup.com/bluemix/">Meetup</a></p>

<p>=======================
Copyright 2016 IBM Corp.</p>

<p>Licensed under the Apache License, Version 2.0 (the <q>License</q>);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an <q>AS IS</q> BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="https://github.com/ibm-bluemix-mobile-services/bms-clientsdk-swift-push" target="_blank" rel="external">IBM</a>. All rights reserved. (Last updated: 2018-09-27)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
